<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Acorns vs Carrots: Chipmunk & Rabbit Dash</title>
  <style>
    :root { color-scheme: light; }
    html, body { height: 100%; margin: 0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; }
    body { background: #0f172a; display: grid; place-items: center; }
    .wrap { width: min(980px, 96vw); }
    .hud {
      display: flex; gap: 12px; align-items: center; justify-content: space-between;
      background: rgba(255,255,255,0.06); color: white; padding: 10px 12px; border-radius: 14px;
      box-shadow: 0 10px 40px rgba(0,0,0,0.35);
      margin-bottom: 10px;
    }
    .hud b { font-weight: 700; }
    .pill { background: rgba(255,255,255,0.10); padding: 6px 10px; border-radius: 999px; }
    .controls { font-size: 12px; opacity: 0.9; line-height: 1.3; }
    canvas {
      width: 100%; aspect-ratio: 16/9; background: linear-gradient(#0b1026, #0f172a 40%, #052e1a);
      border-radius: 18px; display: block;
      box-shadow: 0 10px 50px rgba(0,0,0,0.5);
    }
    .footer {
      color: rgba(255,255,255,0.85);
      margin-top: 10px;
      font-size: 13px;
      display: flex; flex-wrap: wrap; gap: 10px; align-items: center; justify-content: space-between;
    }
    button {
      appearance: none;
      border: 0;
      border-radius: 12px;
      padding: 10px 12px;
      font-weight: 700;
      cursor: pointer;
      background: #22c55e;
      color: #062016;
      box-shadow: 0 8px 18px rgba(34,197,94,0.25);
    }
    button.secondary {
      background: rgba(255,255,255,0.12);
      color: white;
      box-shadow: none;
    }
    .toast {
      position: absolute;
      inset: 0;
      display: grid;
      place-items: center;
      pointer-events: none;
    }
    .panel {
      pointer-events: auto;
      width: min(720px, 92vw);
      background: rgba(15, 23, 42, 0.82);
      border: 1px solid rgba(255,255,255,0.10);
      color: white;
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 20px 70px rgba(0,0,0,0.55);
      backdrop-filter: blur(8px);
    }
    .panel h1 { margin: 0 0 8px 0; font-size: 20px; }
    .panel p { margin: 8px 0; opacity: 0.95; }
    .panel .row { display: flex; gap: 10px; flex-wrap: wrap; margin-top: 12px; }
    .small { font-size: 12px; opacity: 0.85; }
    a { color: #93c5fd; text-decoration: none; }
    a:hover { text-decoration: underline; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hud">
      <div class="pill">‚è±Ô∏è Time: <b id="time">60.0</b>s</div>
      <div class="pill">üêøÔ∏è Chipmunk: <b id="acorns">0</b> points</div>
      <div class="pill">üêá Rabbit: <b id="carrots">0</b> points</div>
      <div class="controls pill">
        Chipmunk: <b>Arrow keys</b> ‚Ä¢ Rabbit: <b>WASD</b> ‚Ä¢ Sprint: <b>Shift</b> / <b>Space</b>
      </div>
    </div>

    <div style="position:relative">
      <canvas id="game" width="1280" height="720" aria-label="Game canvas"></canvas>
      <div class="toast" id="overlay" style="display:none">
        <div class="panel">
          <h1 id="overlayTitle">Acorns vs Carrots</h1>
          <p id="overlayBody">Collect the most before time runs out.</p>
          <div class="row">
            <button id="startBtn">Start / Restart</button>
            <button class="secondary" id="closeBtn">Close</button>
          </div>
          <p class="small">
            Tip: Collect your own food for 2 points, your opponent's for 1 point. Avoid boulders (stun!).
          </p>
          <p class="small">
            This is an original mini-game inspired by classic ‚Äúrunner‚Äù vibes‚Äîno copyrighted characters or assets.
          </p>
        </div>
      </div>
    </div>

    <div class="footer">
      <div>Made with ‚ù§Ô∏è in one HTML file ‚Ä¢ Works offline</div>
      <div>
        <button class="secondary" id="helpBtn">How to play</button>
        <button id="pauseBtn">Pause</button>
      </div>
    </div>
  </div>

<script>
(() => {
  const canvas = document.getElementById('game');
  const ctx = canvas.getContext('2d');

  const ui = {
    time: document.getElementById('time'),
    acorns: document.getElementById('acorns'),
    carrots: document.getElementById('carrots'),
    overlay: document.getElementById('overlay'),
    overlayTitle: document.getElementById('overlayTitle'),
    overlayBody: document.getElementById('overlayBody'),
    startBtn: document.getElementById('startBtn'),
    closeBtn: document.getElementById('closeBtn'),
    helpBtn: document.getElementById('helpBtn'),
    pauseBtn: document.getElementById('pauseBtn'),
  };

  const W = canvas.width, H = canvas.height;
  const LANE_COUNT = 5;
  const LANE_W = 140;
  const ROAD_W = LANE_COUNT * LANE_W;
  const ROAD_X = (W - ROAD_W) / 2;
  const ROAD_Y = 90;
  const ROAD_H = H - 140;

  const GAME_SECONDS = 60;
  const ITEM_SPAWN_RATE = 0.9;
  const BOULDER_SPAWN_RATE = 0.35;

  const clamp = (v, a, b) => Math.max(a, Math.min(b, v));
  const rand = (a, b) => a + Math.random()*(b-a);

  function laneToX(lane) { return ROAD_X + lane * LANE_W + LANE_W/2; }

  const keys = new Set();
  window.addEventListener('keydown', (e) => {
    if (['ArrowUp','ArrowDown','ArrowLeft','ArrowRight',' '].includes(e.key)) e.preventDefault();
    keys.add(e.key.toLowerCase());
  }, {passive:false});
  window.addEventListener('keyup', (e) => keys.delete(e.key.toLowerCase()));

  function makePlayer(kind) {
    const isChip = kind === 'chipmunk';
    return {
      kind,
      lane: isChip ? 1 : 3,
      y: ROAD_Y + ROAD_H - 90,
      speed: 0,
      baseSpeed: isChip ? 390 : 380,
      sprintBoost: 170,
      score: 0,
      own: isChip ? 'acorn' : 'carrot',
      stun: 0,
      wiggle: 0,
    };
  }

  function makeItem(type, lane, y) { return { type, lane, x: laneToX(lane), y, r: 20, taken: false }; }
  function makeBoulder(lane, y) { return { lane, x: laneToX(lane), y, r: 32, hit: false }; }

  let chip, rabbit, items, boulders, tLeft, running, paused, lastTs, spawnItemAcc, spawnBoulderAcc, bgScroll;

  function reset() {
    chip = makePlayer('chipmunk');
    rabbit = makePlayer('rabbit');
    items = [];
    boulders = [];
    tLeft = GAME_SECONDS;
    running = false;
    paused = false;
    lastTs = null;
    spawnItemAcc = 0;
    spawnBoulderAcc = 0;
    bgScroll = 0;

    ui.acorns.textContent = '0';
    ui.carrots.textContent = '0';
    ui.time.textContent = tLeft.toFixed(1);
    ui.pauseBtn.textContent = 'Pause';
  }

  function spawnItem() {
    const lane = (Math.random() * LANE_COUNT) | 0;
    const type = Math.random() < 0.5 ? 'acorn' : 'carrot';
    items.push(makeItem(type, lane, ROAD_Y - 30));
  }
  function spawnBoulder() {
    const lane = (Math.random() * LANE_COUNT) | 0;
    boulders.push(makeBoulder(lane, ROAD_Y - 40));
  }

  function collideCircle(ax, ay, ar, bx, by, br) {
    const dx = ax-bx, dy = ay-by;
    const rr = (ar+br);
    return dx*dx + dy*dy <= rr*rr;
  }

  function playerX(p) { return laneToX(p.lane) + Math.sin(p.wiggle)*6; }

  function roundRect(ctx, x, y, w, h, r) {
    const rr = Math.min(r, w/2, h/2);
    ctx.beginPath();
    ctx.moveTo(x+rr, y);
    ctx.arcTo(x+w, y, x+w, y+h, rr);
    ctx.arcTo(x+w, y+h, x, y+h, rr);
    ctx.arcTo(x, y+h, x, y, rr);
    ctx.arcTo(x, y, x+w, y, rr);
    ctx.closePath();
  }

  function drawStar(x, y, spikes, outerR, innerR) {
    const rot = Math.PI / 2 * 3;
    const step = Math.PI / spikes;
    ctx.beginPath();
    ctx.moveTo(x, y - outerR);
    for (let i = 0; i < spikes; i++) {
      ctx.lineTo(x + Math.cos(rot + step * i * 2) * outerR, y + Math.sin(rot + step * i * 2) * outerR);
      ctx.lineTo(x + Math.cos(rot + step * (i * 2 + 1)) * innerR, y + Math.sin(rot + step * (i * 2 + 1)) * innerR);
    }
    ctx.closePath();
    ctx.stroke();
  }

  function drawChipmunk(x, y, t, stunned) {
    ctx.save(); ctx.translate(x, y);
    const bob = Math.sin(t*10) * (stunned ? 0.5 : 2.0); ctx.translate(0, bob);

    ctx.beginPath(); ctx.fillStyle = '#f59e0b'; ctx.ellipse(-26, -6, 16, 26, -0.9, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.fillStyle = '#d97706'; ctx.ellipse(0, 8, 26, 30, 0, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.fillStyle = '#fde68a'; ctx.ellipse(4, 14, 14, 18, 0, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.fillStyle = '#d97706'; ctx.ellipse(8, -18, 22, 20, 0.2, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.fillStyle = '#b45309';
    ctx.ellipse(0, -36, 8, 10, -0.2, 0, Math.PI*2);
    ctx.ellipse(18, -38, 8, 10, 0.3, 0, Math.PI*2); ctx.fill();

    ctx.fillStyle = '#0b1026';
    ctx.beginPath();
    ctx.ellipse(2, -22, 3.2, 4.2, 0, 0, Math.PI*2);
    ctx.ellipse(14, -24, 3.2, 4.2, 0, 0, Math.PI*2);
    ctx.fill();

    ctx.fillStyle = '#111827';
    ctx.beginPath(); ctx.ellipse(18, -16, 4, 3, 0, 0, Math.PI*2); ctx.fill();

    ctx.globalAlpha = 0.35; ctx.fillStyle = '#fb7185';
    ctx.beginPath();
    ctx.ellipse(0, -14, 6, 4, 0, 0, Math.PI*2);
    ctx.ellipse(10, -14, 6, 4, 0, 0, Math.PI*2);
    ctx.fill();
    ctx.globalAlpha = 1;

    if (stunned) {
      ctx.strokeStyle = 'rgba(255,255,255,0.9)'; ctx.lineWidth = 2;
      for (let i=0;i<6;i++){
        const a = (t*4 + i) * 1.1;
        drawStar(Math.cos(a)*30, -50 + Math.sin(a)*10, 7, 4, 0.6);
      }
    }
    ctx.restore();
  }

  function drawRabbit(x, y, t, stunned) {
    ctx.save(); ctx.translate(x, y);
    const bob = Math.sin(t*10 + 1.2) * (stunned ? 0.5 : 2.0); ctx.translate(0, bob);

    ctx.beginPath(); ctx.fillStyle = '#e5e7eb'; ctx.ellipse(0, 10, 26, 30, 0, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.fillStyle = '#ffffff'; ctx.ellipse(2, 16, 14, 18, 0, 0, Math.PI*2); ctx.fill();
    ctx.beginPath(); ctx.fillStyle = '#e5e7eb'; ctx.ellipse(6, -16, 22, 20, -0.1, 0, Math.PI*2); ctx.fill();

    ctx.fillStyle = '#e5e7eb'; ctx.beginPath();
    ctx.ellipse(-4, -52, 9, 28, -0.2, 0, Math.PI*2);
    ctx.ellipse(16, -54, 9, 28, 0.2, 0, Math.PI*2); ctx.fill();

    ctx.fillStyle = 'rgba(251, 113, 133, 0.55)'; ctx.beginPath();
    ctx.ellipse(-4, -54, 5, 20, -0.2, 0, Math.PI*2);
    ctx.ellipse(16, -56, 5, 20, 0.2, 0, Math.PI*2); ctx.fill();

    ctx.fillStyle = '#ffffff'; ctx.beginPath(); ctx.ellipse(-24, 28, 10, 10, 0, 0, Math.PI*2); ctx.fill();

    ctx.fillStyle = '#0b1026';
    ctx.beginPath();
    ctx.ellipse(0, -18, 3.2, 4.2, 0, 0, Math.PI*2);
    ctx.ellipse(12, -18, 3.2, 4.2, 0, 0, Math.PI*2);
    ctx.fill();

    ctx.fillStyle = '#fb7185';
    ctx.beginPath(); ctx.ellipse(6, -10, 4, 3, 0, 0, Math.PI*2); ctx.fill();

    ctx.strokeStyle = 'rgba(15,23,42,0.65)'; ctx.lineWidth = 1.5;
    ctx.beginPath();
    ctx.moveTo(-6, -10); ctx.lineTo(-22, -14);
    ctx.moveTo(-6, -8);  ctx.lineTo(-22, -8);
    ctx.moveTo(18, -10); ctx.lineTo(34, -14);
    ctx.moveTo(18, -8);  ctx.lineTo(34, -8);
    ctx.stroke();

    if (stunned) {
      ctx.strokeStyle = 'rgba(255,255,255,0.9)'; ctx.lineWidth = 2;
      for (let i=0;i<6;i++){
        const a = (t*4 + i) * 1.1;
        drawStar(Math.cos(a)*30, -62 + Math.sin(a)*10, 7, 4, 0.6);
      }
    }
    ctx.restore();
  }

  function drawAcorn(x, y, r) {
    ctx.save(); ctx.translate(x, y);
    ctx.fillStyle = '#a16207';
    ctx.beginPath(); ctx.ellipse(0, 6, r*0.85, r, 0, 0, Math.PI*2); ctx.fill();
    ctx.fillStyle = '#78350f';
    ctx.beginPath(); ctx.ellipse(0, -2, r*0.95, r*0.55, 0, 0, Math.PI*2); ctx.fill();
    ctx.strokeStyle = '#92400e'; ctx.lineWidth = 3;
    ctx.beginPath(); ctx.moveTo(0, -r*0.9); ctx.lineTo(8, -r*1.2); ctx.stroke();
    ctx.globalAlpha = 0.25; ctx.fillStyle = '#fff';
    ctx.beginPath(); ctx.ellipse(-r*0.25, 6, r*0.18, r*0.35, -0.2, 0, Math.PI*2); ctx.fill();
    ctx.restore();
  }

  function drawCarrot(x, y, r) {
    ctx.save(); ctx.translate(x, y);
    ctx.fillStyle = '#22c55e';
    ctx.beginPath();
    ctx.ellipse(-6, -r*0.85, r*0.25, r*0.55, -0.4, 0, Math.PI*2);
    ctx.ellipse(0, -r*0.95, r*0.25, r*0.65, 0, 0, Math.PI*2);
    ctx.ellipse(6, -r*0.85, r*0.25, r*0.55, 0.4, 0, Math.PI*2);
    ctx.fill();

    ctx.fillStyle = '#fb923c';
    ctx.beginPath();
    ctx.moveTo(0, -r*0.55);
    ctx.quadraticCurveTo(r*0.9, r*0.1, 0, r*1.15);
    ctx.quadraticCurveTo(-r*0.9, r*0.1, 0, -r*0.55);
    ctx.closePath();
    ctx.fill();

    ctx.strokeStyle = 'rgba(120,53,15,0.25)'; ctx.lineWidth = 2;
    for (let i=0;i<3;i++){
      ctx.beginPath();
      ctx.moveTo(-r*0.35, -r*0.1 + i*10);
      ctx.lineTo(r*0.35, -r*0.2 + i*10);
      ctx.stroke();
    }

    ctx.globalAlpha = 0.18; ctx.fillStyle = '#fff';
    ctx.beginPath(); ctx.ellipse(-r*0.2, r*0.15, r*0.18, r*0.5, -0.2, 0, Math.PI*2); ctx.fill();
    ctx.restore();
  }

  function drawBoulder(x, y, r) {
    ctx.save(); ctx.translate(x, y);
    ctx.fillStyle = '#64748b';
    ctx.beginPath(); ctx.ellipse(0, 0, r, r*0.85, 0.1, 0, Math.PI*2); ctx.fill();
    ctx.globalAlpha = 0.25; ctx.fillStyle = '#fff';
    ctx.beginPath(); ctx.ellipse(-r*0.25, -r*0.1, r*0.25, r*0.2, -0.5, 0, Math.PI*2); ctx.fill();
    ctx.restore();
  }

  function drawBackground() {
    ctx.fillStyle = 'rgba(255,255,255,0.08)';
    for (let i=0;i<18;i++){
      const sx = (i*73 + (bgScroll*40)) % W;
      const sy = 20 + (i*29) % 150;
      ctx.fillRect(sx, sy, 2, 2);
    }

    ctx.fillStyle = '#064e3b';
    ctx.beginPath();
    ctx.moveTo(0, H);
    ctx.lineTo(0, H-120);
    for (let x=0;x<=W;x+=80){
      ctx.quadraticCurveTo(x+40, H-170 - 20*Math.sin((x+bgScroll*60)/180), x+80, H-120);
    }
    ctx.lineTo(W, H);
    ctx.closePath();
    ctx.fill();

    roundRect(ctx, ROAD_X, ROAD_Y, ROAD_W, ROAD_H, 22);
    ctx.fillStyle = '#111827';
    ctx.fill();

    ctx.fillStyle = 'rgba(34,197,94,0.22)';
    ctx.fillRect(ROAD_X-16, ROAD_Y, 16, ROAD_H);
    ctx.fillRect(ROAD_X+ROAD_W, ROAD_Y, 16, ROAD_H);

    ctx.strokeStyle = 'rgba(255,255,255,0.25)';
    ctx.lineWidth = 3;
    for (let lane=1; lane<LANE_COUNT; lane++){
      const x = ROAD_X + lane*LANE_W;
      for (let y=ROAD_Y + (bgScroll*280)%60; y<ROAD_Y+ROAD_H; y+=60){
        ctx.beginPath();
        ctx.moveTo(x, y);
        ctx.lineTo(x, y+30);
        ctx.stroke();
      }
    }

    ctx.globalAlpha = 0.12;
    ctx.fillStyle = '#60a5fa';
    ctx.fillRect(ROAD_X + ROAD_W/2 - 6, ROAD_Y, 12, ROAD_H);
    ctx.globalAlpha = 1;
  }

  function stepPlayer(p, dt) {
    p.stun = Math.max(0, p.stun - dt);

    const isChip = p.kind === 'chipmunk';
    const left  = isChip ? 'arrowleft' : 'a';
    const right = isChip ? 'arrowright' : 'd';

    if (p.stun === 0) {
      if (keys.has(left))  p.lane -= 1;
      if (keys.has(right)) p.lane += 1;
    }
    p.lane = clamp(p.lane, 0, LANE_COUNT-1);

    const sprintKey = isChip ? 'shift' : ' ';
    const sprinting = keys.has(sprintKey) && p.stun === 0;

    const target = (p.stun > 0) ? 120 : (p.baseSpeed + (sprinting ? p.sprintBoost : 0));
    p.speed += (target - p.speed) * (1 - Math.exp(-dt*6));

    p.wiggle += dt * (p.stun > 0 ? 2 : 7);
  }

  function scorePickup(player, itemType) {
    const own = itemType === player.own;
    player.score += own ? 2 : 1;
    if (player.kind === 'chipmunk') ui.acorns.textContent = String(player.score);
    else ui.carrots.textContent = String(player.score);
  }

  function showOverlay(title, body) {
    ui.overlayTitle.textContent = title;
    ui.overlayBody.textContent = body;
    ui.overlay.style.display = 'grid';
  }
  function hideOverlay() { ui.overlay.style.display = 'none'; }

  function showHelp() {
    showOverlay(
      'How to play',
      'Race down the lanes and grab food before the timer ends. Chipmunk uses Arrow keys + Shift to sprint. Rabbit uses WASD + Space to sprint. Your own food is worth 2 points; your opponent‚Äôs is worth 1. Avoid boulders or you‚Äôll get stunned briefly.'
    );
  }

  function showEnd() {
    const c = chip.score, r = rabbit.score;
    let body = `Final score ‚Äî Chipmunk: ${c} ‚Ä¢ Rabbit: ${r}. `;
    if (c > r) body += 'üêøÔ∏è Chipmunk wins the forest trophy!';
    else if (r > c) body += 'üêá Rabbit wins the garden trophy!';
    else body += 'It‚Äôs a tie! Both are officially adorable champions.';
    showOverlay('Time!', body);
  }

  function update(dt) {
    if (!running || paused) return;

    tLeft = Math.max(0, tLeft - dt);
    ui.time.textContent = tLeft.toFixed(1);

    bgScroll += dt * 0.45;

    spawnItemAcc += dt * ITEM_SPAWN_RATE;
    while (spawnItemAcc >= 1) { spawnItem(); spawnItemAcc -= 1; }

    spawnBoulderAcc += dt * BOULDER_SPAWN_RATE;
    while (spawnBoulderAcc >= 1) { spawnBoulder(); spawnBoulderAcc -= 1; }

    stepPlayer(chip, dt);
    stepPlayer(rabbit, dt);

    const worldSpeed = (chip.speed + rabbit.speed) / 2;

    for (const it of items) it.y += worldSpeed * dt;
    for (const b of boulders) b.y += worldSpeed * dt;

    for (const it of items) {
      if (it.taken) continue;
      const cx = it.x, cy = it.y;
      if (collideCircle(playerX(chip), chip.y, 28, cx, cy, it.r)) {
        it.taken = true; scorePickup(chip, it.type);
      } else if (collideCircle(playerX(rabbit), rabbit.y, 28, cx, cy, it.r)) {
        it.taken = true; scorePickup(rabbit, it.type);
      }
    }

    for (const b of boulders) {
      if (b.hit) continue;
      const bx = b.x, by = b.y;
      if (collideCircle(playerX(chip), chip.y, 28, bx, by, b.r)) { b.hit = true; chip.stun = 0.75; }
      else if (collideCircle(playerX(rabbit), rabbit.y, 28, bx, by, b.r)) { b.hit = true; rabbit.stun = 0.75; }
    }

    items = items.filter(it => !it.taken && it.y < H + 60);
    boulders = boulders.filter(b => !b.hit && b.y < H + 80);

    if (tLeft <= 0) { running = false; showEnd(); }
  }

  function render(ts) {
    const t = ts / 1000;

    ctx.clearRect(0,0,W,H);
    drawBackground();

    for (const it of items) (it.type === 'acorn') ? drawAcorn(it.x, it.y, it.r) : drawCarrot(it.x, it.y, it.r);
    for (const b of boulders) drawBoulder(b.x, b.y, b.r);

    drawChipmunk(playerX(chip), chip.y, t, chip.stun > 0);
    drawRabbit(playerX(rabbit), rabbit.y, t, rabbit.stun > 0);

    ctx.save();
    ctx.globalAlpha = 0.9;
    ctx.fillStyle = 'rgba(15,23,42,0.55)';
    roundRect(ctx, 16, 16, 430, 56, 16);
    ctx.fill();
    ctx.fillStyle = 'rgba(255,255,255,0.92)';
    ctx.font = '700 18px system-ui, -apple-system, Segoe UI, Roboto, Arial';
    ctx.fillText('Acorns vs Carrots: Chipmunk & Rabbit Dash', 30, 50);
    ctx.restore();

    if (paused && running) {
      ctx.save();
      ctx.fillStyle = 'rgba(255,255,255,0.85)';
      ctx.font = '800 64px system-ui';
      ctx.textAlign = 'center';
      ctx.fillText('PAUSED', W/2, H/2);
      ctx.restore();
    }

    requestAnimationFrame(render);
  }

  ui.startBtn.addEventListener('click', () => { reset(); hideOverlay(); running = true; });
  ui.closeBtn.addEventListener('click', hideOverlay);
  ui.helpBtn.addEventListener('click', showHelp);
  ui.pauseBtn.addEventListener('click', () => {
    if (!running) return;
    paused = !paused;
    ui.pauseBtn.textContent = paused ? 'Resume' : 'Pause';
  });

  reset();
  showOverlay('Acorns vs Carrots', 'Collect the most within 60 seconds. Chipmunk gets 2 points for acorns; Rabbit gets 2 points for carrots. Ready?');
  requestAnimationFrame((ts) => {
    lastTs = ts;
    requestAnimationFrame(render);
    function tick(now) {
      const dt = Math.min(0.033, (now - lastTs) / 1000);
      lastTs = now;
      update(dt);
      requestAnimationFrame(tick);
    }
    requestAnimationFrame(tick);
  });
})();
</script>
</body>
</html>
